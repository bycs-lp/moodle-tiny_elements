define("tiny_elements/imagepicker",["exports","core/modal","core/ajax","core/templates","core/str"],(function(_exports,_modal,_ajax,_templates,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Choose from images for iconurls.
   *
   * @module     tiny_elements/imagepicker
   * @copyright  2025 ISB Bayern
   * @author     Stefan Hanauska <stefan.hanauska@csg-in.de>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal=_interopRequireDefault(_modal),_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates);_exports.init=async(clickSelector,targetSelector)=>{document.querySelectorAll(clickSelector).forEach((element=>{let targetElement=element.closest("fieldset, form").querySelector(targetSelector);element.addEventListener("click",(async()=>{let categoryid=0;if(element.dataset.categoryid)categoryid=element.dataset.categoryid;else{let categoryidelement=element.closest("form").querySelector('[name="compcat"], [name="categoryid"]');categoryidelement&&(categoryid=categoryidelement.value)}let categoryname="";if(element.dataset.categoryname)categoryname=element.dataset.categoryname;else{let categoryelement=element.closest("form").querySelector('[name="categoryname"]');categoryelement&&(categoryname=categoryelement.value)}const result=await _ajax.default.call([{methodname:"tiny_elements_get_images",args:{contextid:1,categoryid:categoryid,categoryname:categoryname}}])[0],renderedTemplate=await _templates.default.render("tiny_elements/imagepicker",{images:result}),pickerModal=await _modal.default.create({removeOnClose:!0,large:!0,body:renderedTemplate,returnElement:element,title:(0,_str.getString)("showprinturls","tiny_elements")});pickerModal.show();pickerModal.getRoot()[0].querySelectorAll(".tiny_elements_thumbnail").forEach((thumbnail=>{thumbnail.addEventListener("click",(event=>{const url=event.target.closest("img").src;targetElement.value=url,pickerModal.hide()}))}))}))}))}}));

//# sourceMappingURL=imagepicker.min.js.map