{"version":3,"file":"ui.min.js","sources":["../src/ui.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tiny Elements UI.\n *\n * @module      tiny_elements/ui\n * @copyright   2022 Marc Catal√† <reskit@gmail.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {component} from './common';\nimport ElementsModal from './modal';\nimport ModalFactory from 'core/modal_factory';\nimport {get_strings as getStrings} from 'core/str';\nimport {\n    isStudent,\n    showPreview\n} from './options';\nimport ModalEvents from 'core/modal_events';\nimport {\n    addVariant,\n    getVariantsClass,\n    getVariantHtml,\n    getVariantPreferences,\n    getVariantsHtml,\n    loadVariantPreferences,\n    removeVariant,\n    setFlavors,\n    setVariants,\n    variantExists,\n    setComponents\n} from './variantslib';\nimport {\n    findByName\n} from './helper';\nimport {\n    savePreferences,\n    loadPreferences,\n    Preferences\n} from './preferencelib';\nimport {call as fetchMany} from 'core/ajax';\nimport {getContextId} from 'editor_tiny/options';\n\nlet userStudent = false;\n\nlet previewElements = true;\nlet components = [];\nlet categories = [];\nlet flavors = [];\nlet variants = [];\nlet langStrings = {};\nlet contextid = 1;\n\nlet currentFlavor = '';\nlet currentFlavorId = 0;\nlet currentCategoryId = 1;\nlet lastFlavor = [];\n\n/**\n * Handle action\n *\n * @param {TinyMCE} editor\n */\nexport const handleAction = async(editor) => {\n    contextid = getContextId(editor);\n    userStudent = isStudent(editor);\n    let data = await getElementsData(userStudent);\n    components = data.components;\n    categories = data.categories;\n    flavors = data.flavors;\n    variants = data.variants;\n    setComponents(components);\n    setVariants(variants);\n    setFlavors(flavors);\n    previewElements = showPreview(editor);\n    langStrings = await getAllStrings();\n    currentCategoryId = await loadPreferences(Preferences.category);\n    lastFlavor = await loadPreferences(Preferences.category_flavors);\n    if (lastFlavor === null) {\n        lastFlavor = [];\n    }\n    let componentVariants = await loadPreferences(Preferences.component_variants);\n    if (componentVariants === null) {\n        componentVariants = {};\n    }\n    loadVariantPreferences(componentVariants);\n    displayDialogue(editor);\n};\n\n/**\n * Display modal\n *\n * @param  {TinyMCE} editor\n */\nconst displayDialogue = async(editor) => {\n    const data = Object.assign({}, {});\n    const templateContext = await getTemplateContext(editor, data);\n    // Show modal with buttons.\n    const modal = await ModalFactory.create({\n        type: ElementsModal.TYPE,\n        templateContext: templateContext,\n        large: true,\n    });\n\n    // Choose class to modal.\n    const modalClass = previewElements ? 'elements-modal' : 'elements-modal-no-preview';\n\n    // Set class to modal.\n    editor.targetElm.closest('body').classList.add(modalClass);\n\n    modal.show();\n\n    // Event modal listener.\n    modal.getRoot().on(ModalEvents.hidden, () => {\n        handleModalHidden(editor);\n    });\n\n    // Event listener for categories without flavors.\n    const soleCategories = modal.getRoot()[0].querySelectorAll('.elements-category.no-flavors');\n    soleCategories.forEach(node => {\n        node.addEventListener('click', (event) => {\n            handleCategoryClick(event, modal);\n        });\n    });\n\n    // Event listener for categories with flavors.\n    const selectCategories = modal.getRoot()[0].querySelectorAll('.elements-category-flavor');\n    selectCategories.forEach(node => {\n        node.addEventListener('click', (event) => {\n            handleCategoryFlavorClick(event, modal);\n        });\n    });\n\n    // Event listener for category dropdown, triggering to switch to last used flavor.\n    const selectCategoriesRemember = modal.getRoot()[0].querySelectorAll('.nav-link.dropdown-toggle');\n    selectCategoriesRemember.forEach(node => {\n        node.addEventListener('click', (event) => {\n            handleCategoryRemember(event, modal);\n        });\n    });\n\n    // Event buttons listeners.\n    const buttons = modal.getRoot()[0].querySelectorAll('.elementst-dialog-button');\n    buttons.forEach(node => {\n        node.addEventListener('click', (event) => {\n            handleButtonClick(event, editor, modal);\n        });\n        if (previewElements) {\n            node.addEventListener('mouseenter', (event) => {\n                handleButtonMouseEvent(event, modal, true);\n            });\n            node.addEventListener('mouseleave', (event) => {\n                handleButtonMouseEvent(event, modal, false);\n            });\n        }\n    });\n\n    // Event variants listeners.\n    const variants = modal.getRoot()[0].querySelectorAll('.elements-button-variant');\n    variants.forEach(node => {\n        node.addEventListener('click', (event) => {\n            handleVariantClick(event, modal);\n        });\n    });\n\n    // Select first or saved category.\n    if (soleCategories.length > 0 || selectCategories.length > 0) {\n        let savedCategory = currentCategoryId;\n        if (soleCategories[0].displayorder > selectCategories[0].displayorder) {\n            selectCategories[0].click();\n        } else {\n            soleCategories[0].click();\n        }\n        if (savedCategory != 0) {\n            soleCategories.forEach((node) => {\n                if (node.dataset.categoryid == savedCategory) {\n                    node.click();\n                }\n            });\n            selectCategories.forEach((node) => {\n                if (node.dataset.categoryid == savedCategory) {\n                    node.click();\n                }\n            });\n        }\n    }\n};\n\n/**\n * Handle a click within filter button.\n *\n * @param {MouseEvent} event The change event\n * @param {obj} modal\n */\nconst handleCategoryClick = (event, modal) => {\n    const link = event.target;\n    currentCategoryId = link.dataset.categoryid;\n\n    // Remove active from all and set to selected.\n    const links = modal.getRoot()[0].querySelectorAll('.nav-link, .dropdown-item');\n    links.forEach(node => node.classList.remove('active'));\n    link.classList.add('active');\n\n    // Show/hide component buttons.\n    showCategoryButtons(modal, currentCategoryId);\n};\n\n/**\n * Handle a click on a flavor in the category dropdown.\n *\n * @param {MouseEvent} event The change event\n * @param {obj} modal\n */\nconst handleCategoryFlavorClick = (event, modal) => {\n    const link = event.target;\n    currentFlavor = link.dataset.flavor;\n    currentFlavorId = link.dataset.id;\n    currentCategoryId = link.dataset.categoryid;\n    lastFlavor[currentCategoryId] = currentFlavorId;\n\n    // Remove active from all and set to selected.\n    const links = modal.getRoot()[0].querySelectorAll('.nav-link, .dropdown-item');\n    links.forEach(node => node.classList.remove('active'));\n    link.classList.add('active');\n    const category = modal.getRoot()[0].querySelector('.nav-link[data-categoryid=\"' + currentCategoryId + '\"]');\n    category.classList.add('active');\n\n    const componentButtons = modal.getRoot()[0].querySelectorAll('.elements-buttons-preview button');\n    componentButtons.forEach(componentButton => {\n        // Remove previous flavor.\n        if (componentButton.dataset.flavor != undefined) {\n            componentButton.classList.remove(componentButton.dataset.flavor);\n        }\n        componentButton.classList.add(currentFlavor);\n        componentButton.dataset.flavor = currentFlavor;\n        if (\n            (componentButton.dataset.flavorlist == '' || componentButton.dataset.flavorlist.split(',').includes(currentFlavor)) &&\n            componentButton.dataset.category == currentCategoryId\n        ) {\n            componentButton.classList.remove('elements-hidden');\n            if (componentButton.dataset.flavorlist != '') {\n                let variants = getVariantsClass(components[componentButton.dataset.id].name, currentFlavor);\n                let availableVariants = componentButton.querySelectorAll('.elements-button-variant');\n                availableVariants.forEach((variant) => {\n                    updateVariantButtonState(variant, variants.indexOf(variant.dataset.variantclass) != -1);\n                });\n            }\n        } else {\n            componentButton.classList.add('elements-hidden');\n        }\n    });\n\n};\n\n/**\n * When opening the category dropdown, try to load remembered flavor.\n *\n * @param {MouseEvent} event The change event\n * @param {obj} modal\n */\nconst handleCategoryRemember = (event, modal) => {\n    const link = event.target;\n    currentCategoryId = link.dataset.categoryid;\n    currentFlavorId = lastFlavor[currentCategoryId];\n\n    if (currentFlavorId != undefined) {\n        // Call handleCategoryFlavorClick with tampered data.\n        let e = {target: modal.getRoot()[0].querySelector('.elements-category-flavor[data-id=\"' + currentFlavorId + '\"]')};\n        handleCategoryFlavorClick(e, modal);\n    }\n};\n\n/**\n * Handle when closing the Modal.\n *\n * @param {obj} editor\n */\nconst handleModalHidden = (editor) => {\n    editor.targetElm.closest('body').classList.remove('elements-modal-no-preview');\n    if (currentCategoryId != 0 && currentFlavorId != 0) {\n        savePreferences([\n            {type: Preferences.category, value: currentCategoryId},\n            {type: Preferences.category_flavors, value: JSON.stringify(lastFlavor)},\n            {type: Preferences.component_variants, value: JSON.stringify(getVariantPreferences())}\n        ]);\n    }\n};\n\nconst updateComponentCode = (componentCode, selectedButton, placeholder, flavor = '') => {\n    componentCode = componentCode.replace('{{PLACEHOLDER}}', placeholder);\n\n    // Return active variants for current component.\n    const variants = getVariantsClass(components[selectedButton].name, flavor);\n\n    // Apply variants to html component.\n    if (variants.length > 0) {\n        componentCode = componentCode.replace('{{VARIANTS}}', variants.join(' '));\n        componentCode = componentCode.replace('{{VARIANTSHTML}}', getVariantsHtml(components[selectedButton].name));\n    } else {\n        componentCode = componentCode.replace('{{VARIANTS}}', '');\n        componentCode = componentCode.replace('{{VARIANTSHTML}}', '');\n    }\n\n    if (currentFlavor) {\n        componentCode = componentCode.replace('{{FLAVOR}}', currentFlavor);\n    } else {\n        componentCode = componentCode.replace('{{FLAVOR}}', '');\n    }\n\n    componentCode = componentCode.replace('{{COMPONENT}}', components[selectedButton].name);\n    componentCode = componentCode.replace('{{CATEGORY}}', categories[currentCategoryId].name);\n\n    // Apply random IDs.\n    componentCode = applyRandomID(componentCode);\n\n    // Apply lang strings.\n    componentCode = applyLangStrings(componentCode);\n\n    return componentCode;\n};\n\n/**\n * Handle a click in a component button.\n *\n * @param {MouseEvent} event The click event\n * @param {obj} editor\n * @param {obj} modal\n */\nconst handleButtonClick = async(event, editor, modal) => {\n    const selectedButton = event.target.closest('button').dataset.id;\n\n    // Component button.\n    if (components[selectedButton]) {\n        const sel = editor.selection.getContent();\n        let componentCode = components[selectedButton].code;\n        const placeholder = (sel.length > 0 ? sel : components[selectedButton].text);\n\n        let flavor = components[selectedButton].flavors.length > 0 ? currentFlavor : '';\n\n        // Create a new node to replace the placeholder.\n        const randomId = generateRandomID();\n        const newNode = document.createElement('span');\n        newNode.dataset.id = randomId;\n        newNode.innerHTML = placeholder;\n        componentCode = updateComponentCode(componentCode, selectedButton, newNode.outerHTML, flavor);\n        // Sets new content.\n        editor.selection.setContent(componentCode);\n\n        // Select text.\n        const nodeSel = editor.dom.select('span[data-id=\"' + randomId + '\"]');\n        if (nodeSel?.[0]) {\n            editor.selection.select(nodeSel[0]);\n        }\n\n        modal.destroy();\n        editor.focus();\n    }\n};\n\n/**\n * Handle a mouse events mouseenter/mouseleave in a component button.\n *\n * @param {MouseEvent} event The click event\n * @param {obj} modal\n * @param {bool} show\n */\nconst handleButtonMouseEvent = (event, modal, show) => {\n    const selectedButton = event.target.closest('button').dataset.id;\n    const node = modal.getRoot()[0].querySelector('div[data-id=\"code-preview-' + selectedButton + '\"]');\n    const previewDefault = modal.getRoot()[0].querySelector('div[data-id=\"code-preview-default\"]');\n    let flavor = components[selectedButton].flavors.length > 0 ? currentFlavor : '';\n\n    node.innerHTML = updateComponentCode(components[selectedButton].code, selectedButton, components[selectedButton].text, flavor);\n\n    if (node) {\n        if (show) {\n            previewDefault.classList.toggle('elements-hidden');\n            node.classList.toggle('elements-hidden');\n        } else {\n            node.classList.toggle('elements-hidden');\n            previewDefault.classList.toggle('elements-hidden');\n        }\n    }\n};\n\n/**\n * Handle a mouse events mouseenter/mouseleave in a variant button.\n * Not used at the moment.\n *\n * @param {MouseEvent} event The mouseenter/mouseleave event\n * @param {obj} modal\n * @param {bool} show\n */\n// eslint-disable-next-line no-unused-vars\nconst handleVariantMouseEvent = (event, modal, show) => {\n    const variant = event.target.closest('span');\n    const variantEnabled = variant.dataset.state == 'on';\n    const button = event.target.closest('button');\n\n    if (!variantEnabled) {\n        updateVariantComponentState(variant, button, modal, show, false);\n    }\n};\n\n\n/**\n * Handle a mouse event within the variant buttons.\n *\n * @param {MouseEvent} event The mouseenter/mouseleave event\n * @param {obj} modal\n */\nconst handleVariantClick = (event, modal) => {\n    event.stopPropagation();\n    const variant = event.target.closest('span');\n    const button = event.target.closest('button');\n    const flavor = components[button.dataset.id].flavors.length > 0 ? currentFlavor : '';\n\n    updateVariantComponentState(variant, button, modal, false, true);\n\n    const node = modal.getRoot()[0].querySelector('div[data-id=\"code-preview-' + button.dataset.id + '\"]');\n    node.innerHTML = updateComponentCode(\n        components[button.dataset.id].code,\n        button.dataset.id,\n        components[button.dataset.id].text,\n        flavor\n    );\n};\n\n/**\n * Get the template context for the dialogue.\n *\n * @param {Editor} editor\n * @param {object} data\n * @returns {object} data\n */\nconst getTemplateContext = async(editor, data) => {\n    return Object.assign({}, {\n        elementid: editor.id,\n        buttons: await getButtons(editor),\n        categories: await getCategories(),\n        preview: previewElements,\n    }, data);\n};\n\n/**\n * Get the Elements categories for the dialogue.\n *\n * @returns {object} data\n */\nconst getCategories = async() => {\n    const cats = [];\n    // Iterate over contexts.\n    categories.forEach((category) => {\n        let categoryFlavors = getCategoryFlavors(category.id);\n        categoryFlavors.sort((a, b) => a.displayorder - b.displayorder);\n        let hasFlavors = hasCategoryFlavors(categoryFlavors);\n         cats.push({\n            categoryid: category.id,\n            name: category.displayname,\n            type: category.id,\n            displayorder: category.displayorder,\n            flavors: categoryFlavors,\n            hasFlavors: hasFlavors,\n            active: '',\n        });\n    });\n    // Sort by displayorder and set first to active.\n    cats.sort((a, b) => a.displayorder - b.displayorder);\n    if (cats.length > 0) {\n        cats[0].active = 'active';\n        if (cats[0].flavors.length > 0) {\n            cats[0].flavors[0].factive = 'active';\n        }\n    }\n\n    return cats;\n};\n\nconst getComponentVariants = (component) => {\n    const componentVariants = [];\n    component.variants.forEach(variant => {\n        let variantitem = findByName(variants, variant);\n        if (variantitem !== undefined) {\n            let state = variantExists(component.name, variantitem.name) ? 'on' : 'off';\n            componentVariants.push({\n                id: variantitem.id,\n                name: variantitem.name,\n                state: state,\n                imageClass: variantitem.name + '-variant-' + state,\n                variantclass: (variantitem.c4lcompatibility ? 'c4l' : 'elements') + '-' + variantitem.name + '-variant',\n                title: langStrings.get(variantitem.name),\n                content: variantitem.content,\n            });\n        }\n    });\n    return componentVariants;\n};\n\nconst getCategoryFlavors = (categoryId) => {\n    const categoryFlavors = [];\n    flavors.forEach(flavor => {\n        if (flavor.categories == categoryId || flavor.categories.split(',').includes(categoryId)) {\n            categoryFlavors.push({\n                id: flavor.id,\n                name: flavor.name,\n                displayname: flavor.displayname,\n                displayorder: flavor.displayorder,\n            });\n        }\n    });\n    return categoryFlavors;\n};\n\nconst hasCategoryFlavors = (value) => {\n    return Array.isArray(value) && value.length;\n};\n\n/**\n * Get the Elements buttons for the dialogue.\n *\n * @param {Editor} editor\n * @returns {object} buttons\n */\nconst getButtons = async(editor) => {\n    const buttons = [];\n    // Not used at the moment.\n    // eslint-disable-next-line no-unused-vars\n    const sel = editor.selection.getContent();\n    Object.values(components).forEach(component => {\n        buttons.push({\n            id: component.id,\n            name: component.displayname,\n            type: component.compcat,\n            imageClass: 'elements-' + component.name + '-icon',\n            htmlcode: component.code,\n            variants: getComponentVariants(component, variants),\n            flavorlist: component.flavors.join(','),\n            category: component.compcat,\n        });\n    });\n    buttons.sort((a, b) => a.displayorder - b.displayorder);\n\n    return buttons;\n};\n\nconst getElementsData = async(userStudent = false) => {\n    const data = await fetchMany([{\n        methodname: 'tiny_elements_get_elements_data',\n        args: {\n            isstudent: userStudent,\n            contextid: contextid\n        },\n    }])[0];\n\n    // TODO error handling.\n    const indexedComponents = [];\n    data.components.forEach(component => {\n        indexedComponents[component.id] = component;\n    });\n\n    const indexedVariants = [];\n    data.variants.forEach(variant => {\n        indexedVariants[variant.id] = variant;\n    });\n\n    const indexedCategories = [];\n    data.categories.forEach(category => {\n        indexedCategories[category.id] = category;\n    });\n\n    return {\n        components: indexedComponents,\n        variants: indexedVariants,\n        categories: indexedCategories,\n        flavors: data.flavors,\n    };\n};\n\n/**\n * Get variants for the dialogue.\n * Not used at the moment.\n *\n * @param  {string} component\n * @param  {object} elements\n * @return {object} Variants for a component\n */\n// eslint-disable-next-line no-unused-vars\nconst getVariantsState = (component, elements) => {\n    const variants = [];\n    let variantState = '';\n    let variantClass = '';\n\n    // Max 3 variants.\n    if (elements.length > 3) {\n        elements = elements.slice(0, 2);\n    }\n\n    elements.forEach((variant, index) => {\n        if (variantExists(component, variant)) {\n            variantState = 'on';\n            variantClass = 'on ';\n        } else {\n            variantState = 'off';\n            variantClass = '';\n        }\n        variantClass += variant + '-variant-' + variantState;\n        variants.push({\n            id: index,\n            name: variant,\n            state: variantState,\n            imageClass: variantClass,\n            title: langStrings.get(variant),\n        });\n    });\n\n    return variants;\n};\n\n/**\n * Update a variant component UI.\n *\n * @param {obj} variant\n * @param {obj} button\n * @param {obj} modal\n * @param {bool} show\n * @param {bool} updateHtml\n */\nconst updateVariantComponentState = (variant, button, modal, show, updateHtml) => {\n    const selectedVariant = variant.dataset.variantclass;\n    const selectedButton = button.dataset.id;\n    const componentClass = button.dataset.classcomponent;\n    const previewComponent = modal.getRoot()[0]\n        .querySelector('div[data-id=\"code-preview-' + button.dataset.id + '\"] .' + componentClass);\n    const variantPreview = modal.getRoot()[0]\n        .querySelector('span[data-id=\"variantHTML-' + button.dataset.id + '\"]');\n    let variantsHtml = '';\n    let hasflavors = components[selectedButton].flavors.length > 0;\n\n    if (previewComponent) {\n        if (updateHtml) {\n            if (variant.dataset.state == 'on') {\n                removeVariant(components[selectedButton].name, variant.dataset.variant, hasflavors ? currentFlavor : '');\n                updateVariantButtonState(variant, false);\n                previewComponent.classList.remove(selectedVariant);\n            } else {\n                addVariant(components[selectedButton].name, variant.dataset.variant, hasflavors ? currentFlavor : '');\n                updateVariantButtonState(variant, true);\n                previewComponent.classList.add(selectedVariant);\n            }\n\n            // Update variant preview HTML.\n            if (variantPreview) {\n                variantPreview.innerHTML = getVariantsHtml(components[selectedButton].name);\n            }\n        } else {\n            variantsHtml = getVariantsHtml(components[selectedButton].name);\n            if (show) {\n                previewComponent.classList.add(selectedVariant);\n                variantsHtml += getVariantHtml(variant.dataset.variant);\n            } else {\n                previewComponent.classList.remove(selectedVariant);\n            }\n\n            // Update variant preview HTML.\n            if (variantPreview) {\n                variantPreview.innerHTML = variantsHtml;\n            }\n        }\n    } else {\n        // Update variants preferences.\n        if (variant.dataset.state == 'on') {\n            removeVariant(components[selectedButton].name, variant.dataset.variant, hasflavors ? currentFlavor : '');\n            updateVariantButtonState(variant, false);\n        } else {\n            addVariant(components[selectedButton].name, variant.dataset.variant, hasflavors ? currentFlavor : '');\n            updateVariantButtonState(variant, true);\n        }\n    }\n};\n\n/**\n * Update a variant button UI.\n *\n * @param {obj} variant\n * @param {bool} activate\n */\nconst updateVariantButtonState = (variant, activate) => {\n    if (activate) {\n        variant.dataset.state = 'on';\n        variant.classList.remove(variant.dataset.variant + '-variant-off');\n        variant.classList.add(variant.dataset.variant + '-variant-on');\n        variant.classList.add('on');\n    } else {\n        variant.dataset.state = 'off';\n        variant.classList.remove(variant.dataset.variant + '-variant-on');\n        variant.classList.add(variant.dataset.variant + '-variant-off');\n        variant.classList.remove('on');\n    }\n};\n\n/**\n * Show/hide buttons depend on selected context.\n *\n * @param  {object} modal\n * @param  {String} context\n */\nconst showCategoryButtons = (modal, context) => {\n    const showNodes = modal.getRoot()[0].querySelectorAll('button[data-type=\"' + context + '\"]');\n    const hideNodes = modal.getRoot()[0].querySelectorAll('button[data-type]:not([data-type=\"' + context + '\"])');\n\n    showNodes.forEach(node => node.classList.remove('elements-hidden'));\n    hideNodes.forEach(node => node.classList.add('elements-hidden'));\n};\n\n/**\n * Replace all localized strings.\n *\n * @param  {String} text\n * @return {String} String with lang tags replaced with a localized string.\n */\nconst applyLangStrings = (text) => {\n    const compRegex = /{{#([^}]*)}}/g;\n\n    [...text.matchAll(compRegex)].forEach(strLang => {\n        text = text.replace('{{#' + strLang[1] + '}}', langStrings.get(strLang[1]));\n    });\n\n    return text;\n};\n\n/**\n * Generates a random string.\n * @return {string} A random string\n */\nconst generateRandomID = () => {\n    const timestamp = new Date().getTime();\n    return 'R' + Math.round(Math.random() * 100000) + '-' + timestamp;\n};\n\n/**\n * Replace all ID tags with a random string.\n * @param  {String} text\n * @return {String} String with all ID tags replaced with a random string.\n */\nconst applyRandomID = (text) => {\n    const compRegex = /{{@ID}}/g;\n\n    if (text.match(compRegex)) {\n        text = text.replace(compRegex, generateRandomID());\n    }\n\n    return text;\n};\n\n/**\n * Get language strings.\n *\n * @return {object} Language strings\n */\nconst getAllStrings = async() => {\n    const keys = [];\n    const compRegex = /{{#([^}]*)}}/g;\n\n    components.forEach(element => {\n        // Get lang strings from components.\n        [...element.code.matchAll(compRegex)].forEach(strLang => {\n            if (keys.indexOf(strLang[1]) === -1) {\n                keys.push(strLang[1]);\n            }\n        });\n\n        // Get lang strings from text placeholders.\n        [...element.text.matchAll(compRegex)].forEach(strLang => {\n            if (keys.indexOf(strLang[1]) === -1) {\n                keys.push(strLang[1]);\n            }\n        });\n    });\n\n    const stringValues = await getStrings(keys.map((key) => ({key, component})));\n    return new Map(keys.map((key, index) => ([key, stringValues[index]])));\n};\n"],"names":["userStudent","previewElements","components","categories","flavors","variants","langStrings","contextid","currentFlavor","currentFlavorId","currentCategoryId","lastFlavor","async","editor","data","getElementsData","getAllStrings","Preferences","category","category_flavors","componentVariants","component_variants","displayDialogue","Object","assign","templateContext","getTemplateContext","modal","ModalFactory","create","type","ElementsModal","TYPE","large","modalClass","targetElm","closest","classList","add","show","getRoot","on","ModalEvents","hidden","handleModalHidden","soleCategories","querySelectorAll","forEach","node","addEventListener","event","handleCategoryClick","selectCategories","handleCategoryFlavorClick","handleCategoryRemember","handleButtonClick","handleButtonMouseEvent","handleVariantClick","length","savedCategory","displayorder","click","dataset","categoryid","link","target","remove","showCategoryButtons","flavor","id","querySelector","componentButton","undefined","flavorlist","split","includes","name","variant","updateVariantButtonState","indexOf","variantclass","e","value","JSON","stringify","updateComponentCode","componentCode","selectedButton","placeholder","replace","join","applyRandomID","applyLangStrings","sel","selection","getContent","code","text","randomId","generateRandomID","newNode","document","createElement","innerHTML","outerHTML","setContent","nodeSel","dom","select","destroy","focus","previewDefault","toggle","stopPropagation","button","updateVariantComponentState","elementid","buttons","getButtons","getCategories","preview","cats","categoryFlavors","getCategoryFlavors","sort","a","b","hasFlavors","hasCategoryFlavors","push","displayname","active","factive","getComponentVariants","component","variantitem","state","imageClass","c4lcompatibility","title","get","content","categoryId","Array","isArray","values","compcat","htmlcode","methodname","args","isstudent","indexedComponents","indexedVariants","indexedCategories","updateHtml","selectedVariant","componentClass","classcomponent","previewComponent","variantPreview","variantsHtml","hasflavors","activate","context","showNodes","hideNodes","matchAll","strLang","timestamp","Date","getTime","Math","round","random","compRegex","match","keys","element","stringValues","map","key","Map","index"],"mappings":"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"}