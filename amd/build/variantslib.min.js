define("tiny_elements/variantslib",["exports","./helper"],(function(_exports,_helper){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.variantExists=_exports.setVariants=_exports.setFlavors=_exports.setComponents=_exports.removeVariant=_exports.loadVariantPreferences=_exports.getVariantsHtml=_exports.getVariantsClass=_exports.getVariantPreferences=_exports.getVariantPreference=_exports.getVariantHtml=_exports.addVariant=void 0;
/**
   * Variants helper for Elements plugin.
   *
   * @module      tiny_elements/variantslib
   * @copyright   2023 Marc Catal√† <reskit@gmail.com>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
let variantPreferences={},VARIANTS=[],COMPONENTS=[],FLAVORS=[];_exports.setFlavors=flavors=>{FLAVORS=flavors};_exports.setVariants=variants=>{VARIANTS=variants};_exports.setComponents=components=>{COMPONENTS=components};_exports.getVariantPreferences=()=>variantPreferences;_exports.loadVariantPreferences=preferences=>{variantPreferences=null!=preferences?preferences:{}};const getVariantPreference=function(component){let flavor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",componentObj=(0,_helper.findByName)(COMPONENTS,component),flavorObj=(0,_helper.findByName)(FLAVORS,flavor);return void 0===componentObj?[]:""!=flavor||variantPreferences[componentObj.id]?""!=flavor&&void 0===flavorObj?[]:""==flavor||variantPreferences[componentObj.id+"-"+flavorObj.id]?""==flavor?variantPreferences[componentObj.id]:variantPreferences[componentObj.id+"-"+flavorObj.id]:[]:[]};_exports.getVariantPreference=getVariantPreference;const variantExists=function(component,variant){let flavor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",variantObj=(0,_helper.findByName)(VARIANTS,variant);return-1!==getVariantPreference(component,flavor).indexOf(variantObj.id)};_exports.variantExists=variantExists;_exports.getVariantsClass=function(component){let flavor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",variants=[];return getVariantPreference(component,flavor).forEach((variant=>{let variantObj=(0,_helper.findById)(VARIANTS,variant);void 0!==variantObj&&variants.push((variantObj.c4lcompatibility?"c4l":"elements")+"-"+variantObj.name+"-variant")})),variants};_exports.getVariantsHtml=component=>{let variantsHtml="",variantObj={};return(0,_helper.findByName)(COMPONENTS,component).variants.forEach((variant=>{variantObj=(0,_helper.findByName)(VARIANTS,variant),null!=variantObj&&(variantsHtml+=variantObj.content)})),variantsHtml};_exports.getVariantHtml=variant=>{let variantHtml=[],variantObj={};return variantObj=(0,_helper.findByName)(VARIANTS,variant),null!=variantObj&&(variantHtml=variantObj.html),variantHtml};_exports.addVariant=function(component,variant){let flavor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",componentObj=(0,_helper.findByName)(COMPONENTS,component),variantObj=(0,_helper.findByName)(VARIANTS,variant),flavorObj=(0,_helper.findByName)(FLAVORS,flavor);""==flavor?(variantPreferences[componentObj.id]||(variantPreferences[componentObj.id]=[]),variantExists(component,variant)||variantPreferences[componentObj.id].push(variantObj.id)):(variantPreferences[componentObj.id+"-"+flavorObj.id]||(variantPreferences[componentObj.id+"-"+flavorObj.id]=[]),variantExists(component,variant,flavor)||variantPreferences[componentObj.id+"-"+flavorObj.id].push(variantObj.id))};_exports.removeVariant=function(component,variant){let flavor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",componentObj=(0,_helper.findByName)(COMPONENTS,component),variantObj=(0,_helper.findByName)(VARIANTS,variant),flavorObj=(0,_helper.findByName)(FLAVORS,flavor);if(""!=flavor){let index=variantPreferences[componentObj.id+"-"+flavorObj.id].indexOf(variantObj.id);-1!==index&&delete variantPreferences[componentObj.id+"-"+flavorObj.id][index],0==variantPreferences[componentObj.id+"-"+flavorObj.id].length&&delete variantPreferences[componentObj.id+"-"+flavorObj.id]}else{let index=variantPreferences[componentObj.id].indexOf(variantObj.id);-1!==index&&delete variantPreferences[componentObj.id][index],0==variantPreferences[componentObj.id].length&&delete variantPreferences[componentObj.id]}}}));

//# sourceMappingURL=variantslib.min.js.map